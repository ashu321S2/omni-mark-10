<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Login</title>
    <!-- Tailwind CSS for layout utilities -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="min-h-screen flex items-center justify-center relative overflow-hidden m-0 p-4">

    <!-- Ambient Background Watermark -->
    <div class="bg-text">
        <h1>Welcome </h1>
    </div>

    <!-- Animated Shuffling Accents -->
    <div class="accents">
        <div class="acc-card"></div>
        <div class="acc-card"></div>
        <div class="acc-card"></div>
    </div>

    <!-- Main Login Interface -->
    <div class="relative">
        <!-- Pink Neon Top Light -->
        <div class="top-light"></div>
        
        <!-- The Shimmer Card -->
        <div class="login-card">
            <div class="flex-grow">
                <!-- Brand Identity -->
                <div class="brand-icon">
                    <svg class="w-5 h-5 text-[#ee83e5]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                </div>
                
                <h2>Login Page</h2>
                <p>Enter Details To Login</p>

                <!-- Auth Form -->
                <form class="space-y-4">
                    <div class="input-group">
                        <label>Username</label>
                        <input id="username" placeholder="Username" required>
                    </div>
                    
                    <div class="input-group">
                        <div class="flex justify-between items-center">
                            <label>Password</label>
                        </div>
                        <input id ="password" type="password" placeholder="••••••••" required>
                    </div>

                    <button id="btnLogin" type="button" class="btn-primary">
                        Login
                    </button>
                     <p id="loginMessage" class="message"></p>
                     <p id="loginOk" class="ok"></p>

                    <div class="links">
                       <p>Don't have an account? <a href="register.html" class="text-[#ee83e5] hover:underline">Register here</a></p>
                    </div>

                </form>
            </div>

            
            
        </div>
    </div>
    <script>
    // minimal login wiring — if you already have login.js keep using that
    // Change this in your js/register.js file
const API_BASE = "/api";
    document.getElementById('btnLogin').addEventListener('click', async () => {
      const msgEl = document.getElementById('loginMessage');
      msgEl.textContent = '';
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();
      if (!username || !password) { msgEl.textContent = 'Enter username & password'; return; }
      try {
        const res = await fetch(API_BASE + '/auth/login', {
          method:'POST',
          headers:{ 'Content-Type':'application/json' },
          body: JSON.stringify({ username, password })
        });
        const text = await res.text();
        let body; try { body = JSON.parse(text); } catch(e){ body = text; }
        if (!res.ok) { msgEl.textContent = (body?.message || body?.error || 'Login failed'); return; }
        const token = body.accessToken || body.token || body.jwt || body.access_token;
        if (!token) { msgEl.textContent = 'Login succeeded but no token returned'; return; }
        localStorage.setItem('accessToken', token);
        window.location.href = '/posts.html';
      } catch (e) {
        console.error('Login error', e);
        msgEl.textContent = 'Network/CORS error';
      }
    });
  </script>
</body>
</html>